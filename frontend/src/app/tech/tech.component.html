<aside>
  <ng-container *ngIf="vehicles$ | async as vehicles">
    <div>
      <mat-checkbox title="Выбрать все"
        [checked]="list.selectedOptions.hasValue() && list.selectedOptions.selected.length === vehicles.length"
        [indeterminate]="list.selectedOptions.hasValue() && list.selectedOptions.selected.length !== vehicles.length"
        (change)="onSelectAllChange($event, list)"></mat-checkbox>

      <form id="search-form" [formGroup]="searchForm">
        <mat-form-field>
          <input matInput id="search" placeholder="Поиск" formControlName="search">
          <span matPrefix>
            <mat-icon color="primary">search</mat-icon>
          </span>
        </mat-form-field>
      </form>
    </div>

    <mat-selection-list #list [hidden]="!vehicles.length" (selectionChange)="onSelectionChange($event)">
      <div *ngFor="let vehicle of vehicles">
        <mat-list-option checkboxPosition="before" [value]="vehicle">{{ vehicle.name }}</mat-list-option>

        <bio-tech-monitoring-state [vehicle]="vehicle" (sendTrackerCommand)="onSendTrackerCommand($event)"></bio-tech-monitoring-state>
      </div>
    </mat-selection-list>

    <p [hidden]="vehicles.length">Техника не найдена</p>
  </ng-container>
</aside>

<bio-map></bio-map>
